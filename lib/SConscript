#
# Licensed to Selene developers ('Selene') under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# Selene licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

Import('venv')

sources = Split("""
backends/backends.c
backends/openssl_threaded.c
core/error.c
core/event.c
core/init.c
core/log.c
core/tls.c
io/buckets.c
io/brigades.c
io/io.c
""")

libselene = None

lenv = venv.Clone()
lenv.AppendUnique(CPPPATH=['#/include/private'])

if lenv['SELEN_LIB_TYPE'] == "STATIC":
  libselene = lenv.StaticLibrary('libselene', sources)
elif venv['SELEN_LIB_TYPE'] == "SHARED":
  libselene = lenv.SharedLibrary('libselene', sources)

Return('libselene')
